<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°ç£æ­·å²é»é»æŒ‘æˆ°</title>
    <!-- è¼‰å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- è¼‰å…¥ React, ReactDOM èˆ‡ Babel -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- è¼‰å…¥ Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&display=swap');
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #FFFDF5;
            margin: 0;
            overflow-x: hidden;
        }

        /* é»é»èƒŒæ™¯æ¨£å¼ */
        .dot-pattern {
            background-image: radial-gradient(#000 2.5px, transparent 2.5px);
            background-size: 40px 40px;
        }

        /* Tada å‹•ç•«ç‰¹æ•ˆ */
        @keyframes tada {
            0% { transform: scale(1); }
            10%, 20% { transform: scale(0.9) rotate(-3deg); }
            30%, 50%, 70%, 90% { transform: scale(1.1) rotate(3deg); }
            40%, 60%, 80% { transform: scale(1.1) rotate(-3deg); }
            100% { transform: scale(1) rotate(0); }
        }
        .animate-tada {
            animation: tada 1s infinite;
        }

        /* è‡ªå®šç¾©åœ“è§’èˆ‡é™°å½± */
        .rounded-dot {
            border-radius: 2.5rem;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useCallback, useRef } = React;

        // æ­·å²äº‹ä»¶è³‡æ–™åº« (åŒ…å«å•é¡Œã€é¸é …ã€æƒ…ç·’è®šç¾èˆ‡æ­·å²æ•…äº‹)
        const events = [
            { id: 1, year: "1980", title: "æ–°ç«¹ç§‘å­¸åœ’å€æˆç«‹", question: "1980å¹´æˆç«‹çš„å“ªä¸€å€‹æ©Ÿæ§‹å¥ å®šäº†å°ç£ã€ŒåŠå°é«”ç‹åœ‹ã€çš„åŸºç¤ï¼Ÿ", options: ["åŠ å·¥å‡ºå£å€", "æ–°ç«¹ç§‘å­¸å·¥æ¥­åœ’å€", "å·¥æ¥­æŠ€è¡“ç ”ç©¶é™¢", "æ•¸ä½ç™¼å±•éƒ¨"], answer: 1, praise: "å¤ªæ£’äº†ï¼ä½ å°±æ˜¯é«˜ç§‘æŠ€å°å¤©æ‰ï¼", story: "ç•¶æ™‚æ”¿åºœæ±ºå®šè½‰å‹é«˜ç§‘æŠ€ï¼Œç§‘å­¸åœ’å€çš„æˆç«‹è®“å°ç£å¾å®¢å»³ä»£å·¥èµ°å‘äº†ä¸–ç•Œæ™¶ç‰‡ä¸­å¿ƒã€‚" },
            { id: 2, year: "1984", title: "æ±Ÿå—æ¡ˆ", question: "ä½œå®¶åŠ‰å®œè‰¯åœ¨ç¾åœ‹é‡åˆºçš„ã€Œæ±Ÿå—æ¡ˆã€ï¼Œå°ç•¶æ™‚å°ç£æ”¿å±€æœ€å¤§çš„å½±éŸ¿æ˜¯ä»€éº¼ï¼Ÿ", options: ["å¼•ç™¼ç¾è»é§å°", "ä¿ƒä½¿è”£ç¶“åœ‹é«”èªå¨æ¬Šçµ±æ²»å¿…é ˆæ”¹è®Š", "å°è‡´å…©å²¸çˆ†ç™¼æˆ°çˆ­", "é€ æˆç¶“æ¿Ÿå¤§è•­æ¢"], answer: 1, praise: "è§€å¯Ÿå…¥å¾®ï¼ä½ å°æ­·å²è½‰æŠ˜é»çš„æŒæ¡çœŸç²¾æº–ï¼", story: "æ­¤äº‹ä»¶éœ‡æ’¼å°ç¾é—œä¿‚ï¼Œä¹Ÿè®“è”£ç¶“åœ‹å…ˆç”Ÿä¸‹å®šæ±ºå¿ƒæ¨å‹•æ°‘ä¸»åŒ–èˆ‡è§£åš´ã€‚" },
            { id: 3, year: "1986", title: "æ°‘ä¸»é€²æ­¥é»¨æˆç«‹", question: "1986å¹´ï¼Œå°ç£ç¬¬ä¸€å€‹æœ¬åœŸåå°é»¨åœ¨åœ“å±±å¤§é£¯åº—å®£å¸ƒæˆç«‹ï¼Œå®ƒæ˜¯ï¼Ÿ", options: ["æ™‚ä»£åŠ›é‡", "å°ç£æ°‘çœ¾é»¨", "æ°‘ä¸»é€²æ­¥é»¨", "è¦ªæ°‘é»¨"], answer: 2, praise: "å®Œå…¨æ­£ç¢ºï¼ä½ å°æ°‘ä¸»é€²ç¨‹ç­å¦‚æŒ‡æŒï¼", story: "åœ¨ç•¶æ™‚å°šæœªè§£åš´çš„å£“åŠ›ä¸‹ï¼Œé€™æ˜¯ä¸€æ¬¡å……æ»¿å‹‡æ°£çš„æ”¿æ²»å†’éšªã€‚" },
            { id: 4, year: "1987", title: "è§£é™¤æˆ’åš´", question: "1987å¹´è”£ç¶“åœ‹ç¸½çµ±å®£å¸ƒè§£åš´ï¼Œå°ç£çµæŸäº†é•·é”å¹¾å¹´çš„æˆ’åš´ç‹€æ…‹ï¼Ÿ", options: ["10å¹´", "25å¹´", "38å¹´", "50å¹´"], answer: 2, praise: "è¶…å¼·è¨˜æ†¶åŠ›ï¼é€™å€‹æ­·å²å¤§æ—¥å­ä½ æŠ“å¾—çœŸç©©ï¼", story: "å°ç£è§£é™¤äº†å…¨ä¸–ç•Œæœ€é•·ä¹‹ä¸€çš„æˆ’åš´ä»¤ï¼Œè¨€è«–èˆ‡é›†æœƒè‡ªç”±çµ‚æ–¼ç¶»æ”¾ã€‚" },
            { id: 5, year: "1987", title: "é–‹æ”¾å…©å²¸æ¢è¦ª", question: "1987å¹´æ”¿åºœé–‹æ”¾è€å…µå›å¤§é™¸æ¢è¦ªï¼Œä¸»è¦æ˜¯åŸºæ–¼ä»€éº¼è€ƒé‡ï¼Ÿ", options: ["ç¶“æ¿Ÿè²¿æ˜“", "è»äº‹æ¼”ç¿’", "äººé“ç«‹å ´", "å¤–äº¤å£“åŠ›"], answer: 2, praise: "ç­”å°äº†ï¼ä½ æ˜¯ä¸€å€‹æº«æš–åˆåšå­¸çš„äººå‘¢ï¼", story: "è€å…µå€‘åœ¨é›¢å®¶å››åå¹´å¾Œï¼Œçµ‚æ–¼èƒ½å¸¶è‘—æ€å¿µå›åˆ°å®¶é„‰ï¼Œæ˜¯éå¸¸æ„Ÿäººçš„æ™‚åˆ»ã€‚" },
            { id: 6, year: "1988", title: "è”£ç¶“åœ‹é€ä¸–èˆ‡æç™»è¼ç¹¼ä»»", question: "è”£ç¶“åœ‹é€ä¸–å¾Œï¼Œç”±å“ªä¸€ä½å‰¯ç¸½çµ±ç¹¼ä»»ï¼Œæˆç‚ºé¦–ä½å°ç£æœ¬åœŸå‡ºèº«çš„ç¸½çµ±ï¼Ÿ", options: ["é€£æˆ°", "æç™»è¼", "å®‹æ¥šç‘œ", "é™³æ°´æ‰"], answer: 1, praise: "å¥½å„ªç§€ï¼ä½ å°é ˜å°äººç‰©çš„æ›´è¿­éå¸¸æ¸…æ¥šå–”ï¼", story: "æç™»è¼ç¸½çµ±çš„ä¸Šä»»ï¼Œæ­£å¼é–‹å•Ÿäº†å°ç£æœ¬åœŸåŒ–èˆ‡å¾ŒçºŒæ°‘ä¸»æ”¹é©çš„è½‰å‹éšæ®µã€‚" },
            { id: 7, year: "1988", title: "520è¾²æ°‘é‹å‹•", question: "1988å¹´çš„ã€Œ520è¾²æ°‘é‹å‹•ã€ï¼Œè¾²æ°‘ä¸Šè¡—é ­çš„ä¸»è¦è¨´æ±‚èˆ‡ä»€éº¼æœ‰é—œï¼Ÿ", options: ["åœŸåœ°æ”¹é©", "è¾²ä¿èˆ‡è¾²æ¥­æ”¿ç­–å„ªåŒ–", "åå°èˆˆå»ºæ ¸é›»å» ", "åŠ å…¥WTO"], answer: 1, praise: "å¤ªè®šäº†ï¼ä½ å¾ˆé—œæ³¨ç¤¾æœƒæ­£ç¾©èˆ‡åŸºå±¤æ¬Šç›Šï¼", story: "é€™æ˜¯å°ç£æˆ°å¾Œæœ€å¤§è¦æ¨¡çš„è¾²æ°‘ç¤ºå¨ï¼Œä¿ƒä½¿æ”¿åºœå…¨é¢æª¢è¨è¾²æ¥­ç¤¾æœƒç¦åˆ©åˆ¶åº¦ã€‚" },
            { id: 8, year: "1990", title: "é‡ç™¾åˆå­¸é‹", question: "1990å¹´å¤§å­¸ç”Ÿåœ¨ä¸­æ­£ç´€å¿µå ‚éœåï¼Œè¦æ±‚å»¢é™¤è‡¨æ™‚æ¢æ¬¾ã€è§£æ•£è¬å¹´åœ‹æœƒçš„é‹å‹•æ˜¯ï¼Ÿ", options: ["å¤ªé™½èŠ±å­¸é‹", "é‡ç™¾åˆå­¸é‹", "äº”å››é‹å‹•", "è‰è“æ—é‹å‹•"], answer: 1, praise: "æ­·å²å¤§å¸«æ˜¯ä½ ï¼é€™å€‹å­¸é‹ç²¾ç¥ä½ æŠ“å¾—è¶…æ£’ï¼", story: "å­¸ç”Ÿæå‡ºçš„å››å¤§è¨´æ±‚å¾Œä¾†å¹¾ä¹å…¨éƒ¨å¯¦ç¾ï¼Œå¥ å®šäº†å°ç£æ†²æ”¿æ”¹é©çš„åŸºç¤ã€‚" },
            { id: 9, year: "1992", title: "åœ‹æœƒå…¨é¢æ”¹é¸", question: "1992å¹´çµ‚çµäº†ã€Œè¬å¹´åœ‹æœƒã€ï¼ŒæŒ‡çš„æ˜¯å“ªä¸€å€‹æ©Ÿæ§‹çš„ä»£è¡¨å…¨é¢æ”¹é¸ï¼Ÿ", options: ["ç«‹æ³•é™¢èˆ‡åœ‹æ°‘å¤§æœƒ", "è¡Œæ”¿é™¢", "å¸æ³•é™¢", "ç›£å¯Ÿé™¢"], answer: 0, praise: "çŸ¥è­˜å»£åšï¼ä½ å°åˆ¶åº¦æ¼”è®Šçš„èªè­˜è®“äººä½©æœï¼", story: "å¾æ­¤ä»¥å¾Œï¼Œæ‰€æœ‰çš„æ°‘æ„ä»£è¡¨éƒ½ç”±å°ç£å…©åƒä¸‰ç™¾è¬äººæ°‘è¦ªè‡ªé¸å‡ºã€‚" },
            { id: 10, year: "1995", title: "å…¨æ°‘å¥ä¿å¯¦æ–½", question: "1995å¹´å¯¦æ–½çš„ä¸€é …é‡å¤§ç¤¾æœƒç¦åˆ©åˆ¶åº¦ï¼Œè‡³ä»Šä»è®“å°ç£é†«ç™‚é«”ç³»äº«è­½åœ‹éš›ï¼Ÿ", options: ["å‹å·¥ä¿éšª", "å…¨æ°‘å¥åº·ä¿éšª", "åœ‹æ°‘å¹´é‡‘", "é•·ç…§è¨ˆç•«"], answer: 1, praise: "ç”Ÿæ´»æ™ºæ…§ç‹ï¼æ²’éŒ¯ï¼Œå¥ä¿å°±æ˜¯å°ç£çš„é©•å‚²ï¼", story: "å¥ä¿å¤§å¹…é™ä½äº†å°ç£äººçš„é†«ç™‚è² æ“”ï¼Œè¢«è­½ç‚ºå°ç£æœ€æˆåŠŸçš„æ”¿ç­–ä¹‹ä¸€ã€‚" },
            { id: 11, year: "1996", title: "é¦–å±†ç¸½çµ±ç›´é¸", question: "1996å¹´å°ç£èˆ‰è¡Œé¦–å±†ç¸½çµ±ç›´é¸ï¼Œæœ€çµ‚ç”±èª°ç•¶é¸ç¬¬ä¸€ä»»æ°‘é¸ç¸½çµ±ï¼Ÿ", options: ["å½­æ˜æ•", "æ—æ´‹æ¸¯", "é™³å±¥å®‰", "æç™»è¼"], answer: 3, praise: "æŒè²é¼“å‹µï¼ä½ è¦‹è­‰äº†æ°‘ä¸»ç™¼å±•çš„æœ€ç¾ç¯‡ç« ï¼", story: "é›–ç„¶ç•¶æ™‚æœ‰å°æµ·å±æ©Ÿï¼Œä½†å°ç£äººä¾ç„¶å‹‡æ•¢åœ°å®Œæˆé¦–æ¬¡ç”±äººæ°‘ç›´é¸ç¸½çµ±çš„å£¯èˆ‰ã€‚" },
            { id: 12, year: "1999", title: "921å¤§åœ°éœ‡", question: "1999å¹´ç™¼ç”Ÿåœ¨å—æŠ•é›†é›†çš„å¼·éœ‡ï¼Œé€ æˆå…¨å°æ…˜é‡å‚·äº¡ï¼Œé€™å ´åœ°éœ‡ç¨±ç‚ºï¼Ÿ", options: ["ç™½æ²³åœ°éœ‡", "921å¤§åœ°éœ‡", "ç¶­å† å¤§åœ°éœ‡", "èŠ±è“®å¤§åœ°éœ‡"], answer: 1, praise: "å¿ƒæ€ç´°è†©ï¼ç­”å°äº†ï¼Œé€™æ˜¯æˆ‘å€‘å…±åŒçš„è¨˜æ†¶ã€‚åŠ æ²¹ï¼", story: "é›–ç„¶ç½æƒ…æ…˜é‡ï¼Œä½†å…¨å°ç£å±•ç¾äº†é©šäººçš„å‡èšåŠ›èˆ‡æ•‘ç½ç†±å¿±ã€‚" },
            { id: 13, year: "2000", title: "é¦–æ¬¡æ”¿é»¨è¼ªæ›¿", question: "2000å¹´å“ªä¸€ä½ç¸½çµ±åƒé¸äººå‹é¸ï¼Œçµ‚çµäº†åœ‹æ°‘é»¨åœ¨å°é•·é”55å¹´çš„åŸ·æ”¿ï¼Ÿ", options: ["å®‹æ¥šç‘œ", "é¦¬è‹±ä¹", "é€£æˆ°", "é™³æ°´æ‰"], answer: 3, praise: "ç™»å³°é€ æ¥µï¼ä½ å°ç¾ä»£å°ç£çš„è½‰è®ŠæŒæ¡å¾—ç„¡æ‡ˆå¯æ“Šï¼", story: "é™³æ°´æ‰å…ˆç”Ÿç•¶é¸å¾Œï¼Œå°ç£å®Œæˆäº†å’Œå¹³çš„æ”¿é»¨è¼ªæ›¿ï¼Œé€™åœ¨äºæ´²æ°‘ä¸»å²æ˜¯éå¸¸é‡è¦çš„æŒ‡æ¨™ã€‚" },
        ];

        const DOT_COLORS = ['bg-[#FF6B6B]', 'bg-[#4ECDC4]', 'bg-[#FFE66D]', 'bg-[#FF9FF3]', 'bg-[#54A0FF]'];

        const App = () => {
            const [shuffledEvents, setShuffledEvents] = useState([]);
            const [selectedIdx, setSelectedIdx] = useState(null);
            const [gameState, setGameState] = useState({});
            const [score, setScore] = useState(0);
            const [showModal, setShowModal] = useState(false);
            const [feedback, setFeedback] = useState(null);
            const [isMuted, setIsMuted] = useState(false);

            // ç¢ºä¿ Lucide åœ–æ¨™æ­£ç¢ºæ¸²æŸ“
            useEffect(() => {
                if (window.lucide) {
                    window.lucide.createIcons();
                }
            });

            const speak = useCallback((text) => {
                if (isMuted) return;
                window.speechSynthesis.cancel();
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'zh-TW';
                utterance.rate = 1.0;
                window.speechSynthesis.speak(utterance);
            }, [isMuted]);

            const resetGame = () => {
                const shuffled = [...events]
                    .sort(() => Math.random() - 0.5)
                    .map(ev => ({ 
                        ...ev, 
                        color: DOT_COLORS[Math.floor(Math.random() * DOT_COLORS.length)] 
                    }));
                setShuffledEvents(shuffled.slice(0, 16));
                setGameState({});
                setScore(0);
                setSelectedIdx(null);
                setShowModal(false);
                setFeedback(null);
                speak("æ­·å²é»é»æ´¾å°é‡æ–°é–‹å§‹å›‰ï¼å¿«ä¾†æŒ‘æˆ°å§ï¼");
            };

            useEffect(() => {
                resetGame();
            }, []);

            const handlePoke = (idx) => {
                if (gameState[idx] === 'revealed' || showModal) return;
                setSelectedIdx(idx);
                setShowModal(true);
                setFeedback(null);
                const event = shuffledEvents[idx];
                speak(`${event.question}ã€‚é¸é …æœ‰ï¼šA ${event.options[0]}ã€‚B ${event.options[1]}ã€‚C ${event.options[2]}ã€‚D ${event.options[3]}`);
            };

            const handleAnswer = (optionIdx) => {
                const currentEvent = shuffledEvents[selectedIdx];
                const isCorrect = optionIdx === currentEvent.answer;

                if (isCorrect) {
                    setFeedback({ isCorrect: true, message: currentEvent.praise });
                    setScore(prev => prev + 1);
                    speak(`ç­”å°äº†ï¼${currentEvent.praise}ã€‚è®“æˆ‘å€‘è½è½é€™æ®µæ•…äº‹ï¼š${currentEvent.story}`);
                    setTimeout(() => {
                        setGameState(prev => ({ ...prev, [selectedIdx]: 'revealed' }));
                        setShowModal(false);
                    }, 5500); // ç•™æ™‚é–“è½æ•…äº‹
                } else {
                    setFeedback({ isCorrect: false, message: `æ­£ç¢ºç­”æ¡ˆæ˜¯ï¼š${currentEvent.options[currentEvent.answer]}` });
                    speak(`å·®ä¸€é»é»ï¼æ­£ç¢ºç­”æ¡ˆæ˜¯ï¼š${currentEvent.options[currentEvent.answer]}ã€‚æ²’é—œä¿‚ï¼Œä¸‹ä¸€é¡ŒåŠ æ²¹ï¼`);
                    setTimeout(() => setShowModal(false), 3000);
                }
            };

            return (
                <div className="min-h-screen p-3 md:p-8 relative">
                    {/* é»é»èƒŒæ™¯åœ–é¨°å±¤ */}
                    <div className="fixed inset-0 opacity-5 pointer-events-none dot-pattern"></div>

                    <div className="max-w-4xl mx-auto relative z-10">
                        {/* Header æ¨™é¡Œå€ */}
                        <header className="bg-white rounded-dot p-6 md:p-10 shadow-2xl border-b-[12px] border-slate-200 mb-8 flex flex-col items-center text-center">
                            <div className="flex items-center gap-3 mb-2">
                                <i data-lucide="sparkles" className="text-pink-500 w-10 h-10 animate-pulse"></i>
                                <h1 className="text-5xl md:text-7xl font-black text-slate-800">
                                    æ­·å²<span className="text-pink-500">é»é»é»</span>
                                </h1>
                            </div>
                            <p className="text-2xl font-bold text-slate-400 mb-6">1980 - 2000 æ™‚ä»£å›é¡§æŒ‘æˆ°</p>
                            
                            <div className="w-full flex justify-between items-center bg-slate-50 rounded-3xl p-4 border-2 border-slate-100">
                                <div className="flex items-center gap-3">
                                    <div className="w-12 h-12 bg-yellow-400 rounded-full border-4 border-white flex items-center justify-center shadow-md">
                                        <i data-lucide="trophy" className="text-white w-6 h-6"></i>
                                    </div>
                                    <span className="text-3xl font-black text-slate-700">å¾—åˆ†ï¼š{score}</span>
                                </div>
                                <div className="flex gap-3">
                                    <button 
                                        onClick={() => setIsMuted(!isMuted)} 
                                        className={`w-14 h-14 rounded-2xl flex items-center justify-center border-4 transition-all ${isMuted ? 'bg-slate-200 border-slate-300 text-slate-400' : 'bg-white border-sky-400 text-sky-500 shadow-md'}`}
                                    >
                                        <i data-lucide={isMuted ? "volume-x" : "volume-2"} className="w-8 h-8"></i>
                                    </button>
                                    <button 
                                        onClick={resetGame} 
                                        className="bg-pink-500 text-white w-14 h-14 rounded-2xl flex items-center justify-center shadow-lg border-4 border-pink-600 transition-all active:translate-y-1"
                                    >
                                        <i data-lucide="rotate-ccw" className="w-8 h-8"></i>
                                    </button>
                                </div>
                            </div>
                        </header>

                        {/* æˆ³æˆ³æ¨‚ç¶²æ ¼å€ */}
                        <main className="grid grid-cols-2 sm:grid-cols-4 gap-4 md:gap-8 mb-12">
                            {[...Array(16)].map((_, i) => {
                                const isRevealed = gameState[i] === 'revealed';
                                const dotColor = shuffledEvents[i]?.color || 'bg-white';
                                return (
                                    <button
                                        key={i}
                                        disabled={isRevealed || showModal}
                                        onClick={() => handlePoke(i)}
                                        className={`
                                            relative aspect-square transition-all duration-300 rounded-dot border-[6px] md:border-[8px]
                                            flex flex-col items-center justify-center p-2 overflow-hidden shadow-xl
                                            ${isRevealed 
                                                ? 'bg-white border-green-400 cursor-default' 
                                                : `${dotColor} border-white hover:scale-105 active:scale-95 hover:rotate-2`}
                                        `}
                                    >
                                        {!isRevealed ? (
                                            <span className="text-7xl md:text-8xl font-black text-white drop-shadow-[4px_4px_0px_rgba(0,0,0,0.2)]">
                                                {i + 1}
                                            </span>
                                        ) : (
                                            <div className="flex flex-col items-center animate-in zoom-in duration-500 text-center px-1">
                                                <span className="text-xs md:text-sm font-black text-pink-500 mb-1">{shuffledEvents[i]?.year}</span>
                                                <span className="text-base md:text-xl font-black text-slate-800 leading-tight">
                                                    {shuffledEvents[i]?.title}
                                                </span>
                                                <i data-lucide="check-circle-2" className="text-green-500 w-6 h-6 mt-2"></i>
                                            </div>
                                        )}
                                    </button>
                                );
                            })}
                        </main>

                        {/* åº•éƒ¨æ•™å¸«æç¤º */}
                        <footer className="text-center text-slate-300 font-bold text-lg pb-10">
                            <p>ğŸ’¡ æ¯ä¸€å€‹å½©è‰²åœ“é»éƒ½è—è‘—ä¸€æ®µå°ç£çš„æ•…äº‹ï¼Œç­”å°é‚„æœ‰æ­·å²ç­†è¨˜å–”ï¼</p>
                        </footer>

                        {/* å•é¡Œå½ˆçª— (Modal) */}
                        {showModal && selectedIdx !== null && (
                            <div className="fixed inset-0 bg-slate-900/80 backdrop-blur-lg flex items-center justify-center p-4 z-50">
                                <div className="bg-white rounded-[3.5rem] border-[12px] border-white shadow-2xl max-w-3xl w-full p-8 md:p-14 relative overflow-hidden animate-in zoom-in duration-300">
                                    <div className="text-center relative z-10">
                                        <div className="bg-pink-50 text-pink-500 px-8 py-2 rounded-full text-2xl font-black mb-8 inline-block border-2 border-pink-100">
                                            ğŸŒŸ ç¬¬ {selectedIdx + 1} è™ŸæŒ‘æˆ° ğŸŒŸ
                                        </div>
                                        
                                        <h2 className="text-3xl md:text-5xl font-black mb-12 text-slate-800 leading-[1.2]">
                                            {shuffledEvents[selectedIdx].question}
                                        </h2>

                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
                                            {shuffledEvents[selectedIdx].options.map((option, oIdx) => (
                                                <button
                                                    key={oIdx}
                                                    disabled={feedback !== null}
                                                    onClick={() => handleAnswer(oIdx)}
                                                    className={`
                                                        w-full p-6 text-left rounded-3xl border-4 transition-all text-2xl md:text-3xl font-black flex items-center
                                                        ${feedback === null ? 'bg-slate-50 border-slate-100 hover:border-pink-500 hover:bg-pink-50 hover:-translate-y-1' : ''}
                                                        ${feedback?.isCorrect && oIdx === shuffledEvents[selectedIdx].answer ? 'bg-green-500 border-green-600 text-white shadow-lg' : ''}
                                                        ${feedback && !feedback.isCorrect && oIdx === optionIdx ? 'bg-pink-500 border-pink-700 text-white' : ''}
                                                        ${feedback && !feedback.isCorrect && oIdx === shuffledEvents[selectedIdx].answer ? 'bg-green-100 border-green-300 text-green-700' : ''}
                                                    `}
                                                >
                                                    <span className={`w-14 h-14 rounded-2xl flex items-center justify-center mr-4 shrink-0 border-2 font-black ${feedback === null ? 'bg-white text-slate-300 border-slate-200' : 'bg-white/20 border-white'}`}>
                                                        {['A', 'B', 'C', 'D'][oIdx]}
                                                    </span>
                                                    {option}
                                                </button>
                                            ))}
                                        </div>

                                        {/* ç­”é¡Œå›é¥‹å€ */}
                                        {feedback && (
                                            <div className={`mt-10 p-8 rounded-[2.5rem] border-4 flex flex-col items-center gap-4 animate-in slide-in-from-bottom-8 ${feedback.isCorrect ? 'bg-yellow-50 border-yellow-400' : 'bg-slate-50 border-slate-200'}`}>
                                                <div className="flex items-center gap-4">
                                                    <i 
                                                        data-lucide={feedback.isCorrect ? "award" : "heart"} 
                                                        className={`w-12 h-12 ${feedback.isCorrect ? "text-yellow-500 animate-tada" : "text-slate-300"}`}
                                                    ></i>
                                                    <span className="text-3xl font-black text-slate-800">
                                                        {feedback.isCorrect ? "å®Œå…¨æ­£ç¢ºï¼å¤ªå¼·äº†ï¼" : "æ²’é—œä¿‚ï¼Œä¸‹æ¬¡å†è©¦è©¦ï¼"}
                                                    </span>
                                                </div>
                                                <p className="text-2xl font-bold text-pink-500 text-center italic">ã€Œ{feedback.message}ã€</p>
                                                
                                                {feedback.isCorrect && (
                                                    <div className="mt-4 p-6 bg-white rounded-3xl border-2 border-yellow-100 text-left w-full flex gap-4 items-start">
                                                        <i data-lucide="book-open" className="text-yellow-500 shrink-0 w-8 h-8 mt-1"></i>
                                                        <p className="text-xl font-bold text-slate-600 leading-relaxed italic">
                                                            æ­·å²ç­†è¨˜ï¼š{shuffledEvents[selectedIdx].story}
                                                        </p>
                                                    </div>
                                                )}
                                            </div>
                                        )}
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
